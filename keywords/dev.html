<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title>我的即刻关键词</title>
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
<style>
body{background-color:#ffe211;margin:0;-webkit-tap-highlight-color:transparent;overflow:hidden;font-family:sans-serif}button,input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:none}button,input,select,textarea{outline:0;border-radius:0}textarea{resize:none}input{width:245px;height:50px;line-height:50px;font-size:30px;font-weight:800;text-align:center;border:none;border-bottom:solid 5px #000;margin-top:20px}#generate{width:171px;height:50px;background-color:#000;text-align:center;color:transparent;font-size:64px;font-weight:800;margin-top:22px;border:none;background-image:url(generate.svg);background-position:center;background-repeat:no-repeat;background-size:54%}button:active{opacity:.8}::-webkit-input-placeholder{color:#ffe211!important}#container{margin:0 auto;padding:10px;width:320px;height:569px;overflow-y:hidden;background:#ffe211;position:fixed;left:50%;top:50%;transform:translate(-50%,-50%)}#card{transform:scale(.8);margin-top:-33px}#cn{margin-top:5px;margin-left:-2px}#top{width:18px;height:18px;border:5px solid #000;background-color:#fff;background-image:url(pattern.png);background-repeat:repeat;background-size:23px;animation:progress 1s linear infinite;margin-top:-34px}#keywords{border:5px solid #000;margin:auto 0;width:276px;height:276px;z-index:777;position:relative}#cloud-container{height:307px}#cloud-background{border:5px solid #000;margin:auto 0;width:276px;height:276px;position:relative;top:-278px;left:14px;background-color:#03a9f4;z-index:10;background-image:url(pattern.png);background-repeat:repeat;background-size:23px}#username{width:187px;height:76px;border:5px solid #000;background-color:#fff;overflow:hidden}#avatar{border-radius:100%;width:80px;height:80px;border:5px solid #000;background-color:#fff;position:relative;left:209px;bottom:49px;background-size:cover;z-index:1}#en img{width:200px;margin-top:17px}#bar{width:187px;height:24px;background-color:#fff;background-image:url(pattern.png);background-repeat:repeat;background-size:23px;border-bottom:5px solid #000}#nametag{font-family:AvenirNextCondensed-Bold,Helvetica,sans-serif;font-weight:800;font-size:22px;padding-top:17px;padding-left:6px}#askname{width:100%;height:100%;padding:0;margin:0;background-color:#ffe211;position:fixed;z-index:999;display:flex;justify-content:center;align-items:center}#form{width:auto;margin:0 auto;text-align:center}#cn img{height:82px}#ani1{animation:slideIn 1s cubic-bezier(.34,.01,.4,.99) forwards;animation-delay:.1s;transform:translateY(100vh)}#ani2{animation:slideIn 1s cubic-bezier(.34,.01,.4,.99) forwards;animation-delay:.15s;transform:translateY(100vh)}#ani3{animation:slideIn 1s cubic-bezier(.34,.01,.4,.99) forwards;animation-delay:.25s;transform:translateY(100vh)}#generate{animation:slideIn 1s cubic-bezier(.34,.01,.4,.99) forwards;animation-delay:.36s;transform:translateY(100vh)}#loading{width:100%;height:100%;padding:0;margin:0;background-color:#ffe211;position:fixed;z-index:888;display:flex;justify-content:center;align-items:center}#loadtext{position:absolute;bottom:20px;font-size:20px;font-weight:800;text-align:center;width:100%;font-family:sans-serif}#progress{width:220px;height:34px;border:solid 5px #000;background-color:#fff;background-image:url(pattern.png);background-repeat:repeat;background-size:23px;animation:progress .3s linear infinite}#en{position:relative;top:-91px}#footer a{text-decoration:none}@keyframes progress{from{background-position:0}to{background-position:23px}}@keyframes slideIn{from{transform:translateY(100vh)}to{transform:translateY(0)}}.fadeOut{opacity:0;display:none!important}.fadeIn{opacity:1;display:flex!important}#back{position:fixed;z-index:9999;right:0;top:0;display:none;opacity:0}#card{padding:10px}#statement{font-size:17px;font-weight:800;margin-top:37px;position:static;animation:slideIn 1s cubic-bezier(.34,.01,.4,.99) forwards;animation-delay:.49s;transform:translateY(100vh)}#card{height:586px}#alert{width:100%;height:60px;line-height:60px;background-color:#000;position:fixed;bottom:-63px;z-index:100000;color:#fff;text-align:center;font-size:20px;font-weight:800;transition:all .5s cubic-bezier(.165,.84,.44,1)}.showalert{bottom:0!important;transition:all .3s cubic-bezier(.165,.84,.44,1)}#footer{position:relative;top:28px;text-align:right;font-size:15px;font-weight:800;line-height:18px;transform-origin:right;opacity:.2;transform:scale(.75)}.footerspan{opacity:1;font-size:12px}@media screen and (min-width:321px){#card{padding:0}#container{padding:30px;height:590px}#card{transform:scale(1)}#keywords{width:300px!important;height:300px!important}#cloud-background{width:300px;height:300px;top:-305px;left:10px}#cloud-container{height:331px;margin-top:3px}#avatar{left:230px;bottom:55px}#en img{margin-top:11px}#cn{margin-top:10px}}@media screen and (max-device-height:668px){#card{transform:scale(.9)}}@media screen and (max-device-height:570px){#card{transform:scale(.8)}}
</style>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="https://img.wusen.me/wordcloud2.js"></script>
</head>
<body>
<div id="askname">
	<div id="form">
		<img src="logo.svg" id="ani1" style="width: 130px; margin-bottom: 20px; margin-top: -43px;">
		<br>
		<img src="title.svg" id="ani2" style="width: 152px;">
		<br>
		<input id="ani3" type="text" name="nickname" placeholder="nickname" required>
		<br>
		<button id="generate" type="button" onclick="generate()"></button>
		<div id="statement">
			ℹ️非官方活动
		</div>
	</div>
</div>
<div id="loading">
	<div id="progress">
	</div>
	<br>
	<div id="loadtext">
		Generating...
	</div>
</div>
<div id="container">
	<div id="card">
		<div id="footer">
			<span class="footerspan">Created by</span>
			<br>
			<a href="jike://page.jk/user/1672AA0A-939A-478A-AE26-98569F27F0EF/">@owlwong</a> & <a href="jike://page.jk/user/5c8507f9-f2e7-4d1a-82ec-4e13bb07548d/">@熊猫镇长</a><br>
			<span class="footerspan">Special Thanks to</span><br>
			@designwill & @搞即建的
		</div>
		<div id="top">
		</div>
		<div id="cn">
			<img src="cn.svg">
		</div>
		<div id="cloud-container">
			<canvas id="keywords" class="word_cloud" width="828" height="828" style="width: 276px; height: 276px; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></canvas>
			<div id="cloud-background">
			</div>
		</div>
		<div id="username">
			<div id="bar">
			</div>
			<div id="nametag">
				@owlwong
			</div>
		</div>
		<div id="avatar">
		</div>
		<div id="en">
			<img src="en.svg">
		</div>
	</div>
</div>
<div id="back">
	<button type="button" onclick="goBack()">Back</button>
</div>
<div id="alert">
	服务器开了一个小差
</div>
<script>
$("#back").hide();function generate(){$("#askname").addClass("fadeOut");$("#loading").addClass("fadeIn");var nickname=$("input").val();$.getJSON("http://139.199.9.38:8282/"+nickname,function(json){console.log(json.success);console.log(json.data);if(json.success==false){$("#askname").removeClass("fadeOut");$("#loading").removeClass("fadeIn");$("#loading").addClass("fadeOut");$("#alert").html("服务器提了一个问题，检查下昵称？");setTimeout(function(){$("#alert").addClass("showalert")},1000);setTimeout(function(){$("#alert").removeClass("showalert")},4000);$("#back").hide()}else if(json.success==true){if(json.data.length<=1){console.log("dynamic too short");$("#askname").removeClass("fadeOut");$("#loading").removeClass("fadeIn");$("#loading").addClass("fadeOut");$("#back").hide();$("#alert").html("多发点动态吧！");setTimeout(function(){$("#alert").addClass("showalert")},1000);setTimeout(function(){$("#alert").removeClass("showalert")},4000)}else{var maxLength=json.data[0][1];if(maxLength<2){var factorNum=54}else if(maxLength<4){var factorNum=51}else if(maxLength<5){var factorNum=37}else if(maxLength<6){var factorNum=32}else if(maxLength<7){var factorNum=28}else if(maxLength<8){var factorNum=20}else{var factorNum=18};console.log(factorNum);WordCloud(document.getElementById('keywords'),{list:json.data,gridSize:12,weightFactor:factorNum,fontFamily:'sans-serif',fontWeight:800,color:function(word,weight){return(weight>=4)?'#ef4646':'#000'},backgroundColor:'#fff',rotateRatio:0,shape:'square',});$("#nametag").html("@"+json.user.screenName);$("#avatar").css("background-image","url("+json.user.avatarImage+")");setTimeout($("#loading").removeClass("fadeIn"),3000);setTimeout($("#loading").addClass("fadeOut"),3000);$("#back").show();console.log(json.data)}}})}function goBack(){$("#askname").removeClass("fadeOut");$("#loading").removeClass("fadeIn");$("#loading").addClass("fadeOut");$("#back").hide()}
	</script>
</body>
</html>